{"version":3,"sources":["main.js"],"names":["window","addEventListener","cartWrapper","document","querySelector","cart","close","open","goodsBtn","querySelectorAll","products","confirm","badge","totalCost","titles","calcGoods","i","items","textContent","length","calcTotal","prices","total","forEach","item","emptyCartText","empty","style","display","body","overflow","btn","cloneNode","trigger","removeBtn","createElement","remove","id","setInterval","clearInterval","opacity","transform","showConfirm","classList","add","innerHTML","appendChild","parentElement","slice"],"mappings":"AAAAA,OAAOC,iBAAiB,mBAAoB,WACxC,IAAIC,EAAcC,SAASC,cAAc,kBACrCC,EAAOF,SAASC,cAAc,SAC9BE,EAAQH,SAASC,cAAc,gBAC/BG,EAAOJ,SAASC,cAAc,SAC9BI,EAAWL,SAASM,iBAAiB,eACrCC,EAAWP,SAASM,iBAAiB,gBACrCE,EAAUR,SAASC,cAAc,YACjCQ,EAAQT,SAASC,cAAc,eAC/BS,EAAYV,SAASC,cAAc,uBACnCU,EAASX,SAASM,iBAAiB,iBAsEvC,SAASM,EAAUC,GACf,IAAIC,EAAQf,EAAYO,iBAAiB,gBACzCG,EAAMM,YAAcD,EAAME,OAASH,EAGvC,SAASI,IACL,IAAIC,EAASlB,SAASM,iBAAiB,wDACnCa,EAAQ,EACZD,EAAOE,QAAQ,SAAUC,GACrBF,IAAUE,EAAKN,cAEnBL,EAAUK,YAAcI,EAe5B,SAASG,IACL,IAAIC,EAAQxB,EAAYE,cAAc,UACX,IAAtBQ,EAAMM,YACPQ,EAAMC,MAAMC,QAAU,QAEtBF,EAAMC,MAAMC,QAAU,OAxF9BrB,EAAKN,iBAAiB,QAVtB,WACII,EAAKsB,MAAMC,QAAU,QACrBzB,SAAS0B,KAAKF,MAAMG,SAAW,WASnCxB,EAAML,iBAAiB,QANvB,WACII,EAAKsB,MAAMC,QAAU,OACrBzB,SAAS0B,KAAKF,MAAMG,SAAW,KAO/BtB,EAASe,QAAQ,SAAUQ,EAAKf,GAC5Be,EAAI9B,iBAAiB,QAAS,WAC1B,IAAIuB,EAAOd,EAASM,GAAGgB,WAAU,GAC7BC,EAAUT,EAAKpB,cAAc,UAC7B8B,EAAY/B,SAASgC,cAAc,OAEvCF,EAAQG,SA6BpB,WACIzB,EAAQgB,MAAMC,QAAU,QACxB,IAAIZ,EAAI,IAEJqB,EAAKC,YAET,WACc,KAANtB,GACAuB,cAAcF,GACd1B,EAAQgB,MAAMC,QAAU,SAExBjB,EAAQgB,MAAMa,QAAU,IAAMxB,EAC9BL,EAAQgB,MAAMc,UAAY,eAAiBzB,EAAI,MAC/CA,MAToB,IAhCpB0B,GACA3B,EAAU,GAEVmB,EAAUS,UAAUC,IAAI,sBACxBV,EAAUW,UAAY,SACtBrB,EAAKsB,YAAYZ,GAEjBhC,EAAY4C,YAAYtB,GAExBC,IACAL,IAmDQlB,EAAYO,iBAAiB,uBACnCc,QAAQ,SAAUQ,GACxBA,EAAI9B,iBAAiB,QAAS,WAC1B8B,EAAIgB,cAAcX,SAClBrB,EAAU,GACVK,IACAK,YAhDRX,EAAOS,QAAQ,SAAUC,GACS,GAA1BA,EAAKN,YAAYC,SACjBK,EAAKN,YAAcM,EAAKN,YAAY8B,MAAM,EAAG,IAAM","file":"main.js","sourcesContent":["window.addEventListener(\"DOMContentLoaded\", function () {\r\n    var cartWrapper = document.querySelector(\".cart__wrapper\"),\r\n        cart = document.querySelector(\".cart\"),\r\n        close = document.querySelector(\".cart__close\"),\r\n        open = document.querySelector(\"#cart\"),\r\n        goodsBtn = document.querySelectorAll(\".goods__btn\"),\r\n        products = document.querySelectorAll(\".goods__item\"),\r\n        confirm = document.querySelector(\".confirm\"),\r\n        badge = document.querySelector(\".nav__badge\"),\r\n        totalCost = document.querySelector(\".cart__total > span\"),\r\n        titles = document.querySelectorAll(\".goods__title\");\r\n\r\n\r\n    function openCart() {\r\n        cart.style.display = \"block\";\r\n        document.body.style.overflow = \"hidden\";\r\n    }\r\n\r\n    function closeCart() {\r\n        cart.style.display = \"none\";\r\n        document.body.style.overflow = \"\";\r\n    }\r\n\r\n    open.addEventListener(\"click\", openCart);\r\n    close.addEventListener(\"click\", closeCart);\r\n\r\n    function addGoods() {\r\n        goodsBtn.forEach(function (btn, i) {\r\n            btn.addEventListener(\"click\", function () {\r\n                var item = products[i].cloneNode(true);\r\n                var trigger = item.querySelector(\"button\");\r\n                var removeBtn = document.createElement(\"div\");\r\n\r\n                trigger.remove();\r\n                showConfirm();\r\n                calcGoods(1);\r\n\r\n                removeBtn.classList.add(\"goods__item-remove\");\r\n                removeBtn.innerHTML = \"&times\";\r\n                item.appendChild(removeBtn);\r\n\r\n                cartWrapper.appendChild(item);\r\n\r\n                emptyCartText();\r\n                calcTotal();\r\n                removeFromCart();\r\n            })\r\n        });\r\n    }\r\n\r\n    addGoods();\r\n\r\n    function sliceTitle() {\r\n        titles.forEach(function (item) {\r\n            if (item.textContent.length > 70) {\r\n                item.textContent = item.textContent.slice(0, 71) + \"...\";\r\n            }\r\n        })\r\n    }\r\n\r\n    sliceTitle();\r\n\r\n    function showConfirm() {\r\n        confirm.style.display = \"block\";\r\n        var i = 100;\r\n\r\n        var id = setInterval(frame, 10);\r\n\r\n        function frame() {\r\n            if (i === 10) {\r\n                clearInterval(id);\r\n                confirm.style.display = \"none\";\r\n            } else {\r\n                confirm.style.opacity = \".\" + i;\r\n                confirm.style.transform = \"translateY(-\" + i + \"px)\";\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n\r\n    function calcGoods(i) {\r\n        var items = cartWrapper.querySelectorAll(\".goods__item\");\r\n        badge.textContent = items.length + i;\r\n    }\r\n\r\n    function calcTotal() {\r\n        var prices = document.querySelectorAll(\".cart__wrapper > .goods__item > .goods__price > span\");\r\n        var total = 0;\r\n        prices.forEach(function (item) {\r\n            total += +item.textContent;\r\n        });\r\n        totalCost.textContent = total;\r\n    }\r\n\r\n    function removeFromCart() {\r\n        var removeBtn = cartWrapper.querySelectorAll(\".goods__item-remove\");\r\n        removeBtn.forEach(function (btn) {\r\n            btn.addEventListener(\"click\", function () {\r\n                btn.parentElement.remove();\r\n                calcGoods(0);\r\n                calcTotal();\r\n                emptyCartText();\r\n            })\r\n        })\r\n    }\r\n\r\n    function emptyCartText() {\r\n        var empty = cartWrapper.querySelector(\".empty\");\r\n        if (+badge.textContent === 0){\r\n            empty.style.display = \"block\";\r\n        } else {\r\n            empty.style.display = \"none\";\r\n        }\r\n    }\r\n});"]}