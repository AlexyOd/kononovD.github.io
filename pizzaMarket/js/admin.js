function init(){$.post("core.php",{action:"init"},showGoods)}function showGoods(o){o=JSON.parse(o);var e="<select>";for(var t in e+='<option data-id ="0">Новая пицца </option>',o)o.hasOwnProperty(t)&&(e+="<option data-id="+t+">"+o[t].name+"</option>");e+="</select>",$("input").val(""),$("textarea").val(""),$(".goods-out").html(e),$(".goods-out select").on("change",selectGoods)}function selectGoods(){var o=$(".goods-out select option:selected").attr("data-id");$.post("core.php",{action:"selectOneGoods",gid:o},function(o){o=JSON.parse(o),$("#gName").val(o.name),$("#gCost").val(o.cost),$("#gDesc").val(o.description),$("#gImg").val(o.img),$("#gId").val(o.id),$("#gBigDesc").val(o.bigdesc)})}function saveToDb(){var o=$("#gId").val();""!==o?$.post("core.php",{action:"updateGoods",id:o,gname:$("#gName").val(),gcost:$("#gCost").val(),gdesc:$("#gDesc").val(),gimg:$("#gImg").val(),gbigdesc:$("#gbigdesc").val()},function(o){"Update successful"==o?(alert("Сохранено!"),init()):console.log(o)}):$.post("core.php",{action:"newGoods",id:0,gname:$("#gName").val(),gcost:$("#gCost").val(),gdesc:$("#gDesc").val(),gimg:$("#gImg").val(),gbigdesc:$("#gbigdesc").val()},function(o){"Add successful"==o?(alert("Поле добавлено!!"),init()):console.log(o)})}function delFromDb(){var o=$("#gId").val();""!==o?$.post("core.php",{action:"deleteGoods",id:o},function(o){"Delete successful"==o?(alert("Удалено!"),init()):console.log(o)}):alert("Удалять нечего")}$(document).ready(function(){init(),$("#add-to-db").on("click",saveToDb),$("#del-from-db").on("click",delFromDb)});
//# sourceMappingURL=admin.js.map
